<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Captain Planet: The Game</title>

  <!-- Bootstrap File -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- JQuery -->
  <script src="https://code.jquery.com/jquery.js"></script>

</head>
<body>

  <!-- Overall Bootstrap Grid -->
  <div class="container">

    <!-- Jumbotron with Title -->
    <div class="jumbotron">
      <h3 class="text-center"><strong>Captain Planet Collector!!!</strong></h3>
      <h4 class="text-center">Rated A for Annoying!</h4>
      <hr>
    <div class="text-center">  
        <img class="float-left" src="assets/images/heart.gif" height="250px" />
        <img class="float-right" src="assets/images/trees.gif" height="250px" />
    </div>
    <hr>
      <div class="text-center">
        <button class="btn btn-warning btn-xs theme-button"><span class="glyphicon glyphicon-music"></span> Play Theme!</button>
        <button class="btn btn-default btn-xs pause-button"><span class="glyphicon glyphicon-pause"></span> Pause Song</button>
      </div>

    </div>
    <div class="row">

      <!-- Left Panel -->
      <div class="col-lg-6">
          <div class="row">
          <div class="col-lg-12">
        <!-- Controls (Superpower Grow/Shrink)-->
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Number to Guess!</h3>
          </div>
          <div class="panel-body">
            <div class="text-center">
              <h4>Number to Guess is: <span id="number-to-guess"></span></h4>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-12">
        <!-- Controls (Superpower Grow/Shrink)-->
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Wins and Losses</h3>
          </div>
          <div class="panel-body">
            <div class="text-center">
              <h4>You guessed: <span id="your-guess"></span></h4>
              <h4>Your new score is: <span id="your-score"></span></h4>
              <h4>Wins: <span id="your-wins"></span></h4>
              <h4>Losses: <span id="your-losses"></span></h4>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
      <!-- Right Panel (Captain Planet Hero)-->
      <div class="col-lg-6">
        <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Click it BITC#3$!</h3>
            </div>
            <div class="panel-body">
              <div class="text-center">
                  <div id="targetDiv" class="cap-images" >
                    <!-- Dynamically created images get inserted here -->
                </div>
              </div>
            </div>
          </div>
      </div>
    </div>
  </div>

  <script>

    // JavaScript function that wraps everything
    $(document).ready(function() {

        // Get links for playing music
        var audioElement = document.createElement("audio");
        audioElement.setAttribute("src", "assets/captainplanet24.mp3");        

        // theme button
        $(".theme-button").on("click", function() {
            audioElement.play();
        })

        $(".pause-button").on("click", function() {
            audioElement.pause();
        });
        
        // Establish a target number
        var targetNumber = 50;

        // Set the number-to-gess header to match the targetNumber
        // This allow us to change the HTML to match the value in the javascript
        $("#number-to-guess").text(targetNumber);

        

        // Here we select the numbers in numberOptions to start
        // We set this number at the start of the game
        var numberOptions = [10, 5, 3, 7];

        var captainValue = 0;

        var captainArray = ['assets/images/one.gif', 'assets/images/two.gif', 'assets/images/three.gif', 'assets/images/four.gif'];

          for(var i = 0; i < captainArray.length; i++){
            var captainImg = $("<img>"); // Make a new image element
            captainImg.attr("src", captainArray[i]); // Make the src point to one of the addresses
            captainImg.attr('height', '89px');
            captainImg.attr('class', 'cap-images');
            captainImg.attr('data-captainvalue', Math.floor(Math.random() * 12) + 2) // Assign a data value to a random number you can extract when clicked that won't be 1
            $('#targetDiv').append(captainImg); //append each image to a Div in your HTML
          }
        
          var counter = 0;
          var yourWins = 0;
          var yourLosses = 0;

        $(".cap-images").on("click", function() {

          // Determining the captain's value requires us to extract the value from the data attribute.
          // Using the $(this) keyword specifies that we should be extracting the captain value of the clicked captain.
          // Using the .attr("data-captainvalue") allows us to grab the value out of the "data-captainvalue" attribute.
          // Since attributes on HTML elements are strings, we must convert it to an integer before adding to the counter

          var captainValue = ($(this).attr("data-captainvalue"));
          captainValue = parseInt(captainValue);
          // We then add the captainValue to the user's "counter" which is a global variable.
          // Every click, from every captain adds to the global counter.
          // Each time user clicks a Captain the counter goes up by 1
         
            counter += captainValue;
            // console.log(captainValue)

            // Output the number of times the Captin has been clicked
            $("#your-score").html(counter);

            // Here we created some logic to "check" if the click counter matches the targetNumber.
            // Remember, this click event will be triggered with each click.
            // With each click the counter will increase by 10 and be re-evaluated against target.
            if (counter === targetNumber) {

                // If numbers match we tell the user they won!
                yourWins++;
                $("#your-wins").html(yourWins);
                resetGame();
            }
            // Added this else if statement to tell the user they lost in the event their counter goes over the target guess
            else if (counter >= targetNumber) {
                yourLosses++;
                $("#your-losses").html(yourLosses);
                resetGame();
            }

            function resetGame() {
              counter = 0;
              targetNumber = Math.floor(Math.random() * 50);
            }

        });


    });

  </script>

</body>
</html>
